# Конструктор сайтов на Nuxt 3 — План работ

## 1. Инициализация проекта и инструменты

- Создать проект Nuxt 3 с включённой поддержкой TypeScript
- Настроить поддержку SCSS с папкой для глобальных переменных/примесей
- Установить и настроить Pinia, ESLint (правила Vue + TS), Prettier, Stylelint (SCSS/BEM)
- Добавить Husky + lint-staged для pre-commit форматирования и линтинга
- Определить скрипты проекта для dev, build, lint, test и format

## 2. Архитектура и маршрутизация

- Подготовлены каталоги `pages`, `components`, `composables`, `stores`, `modules`
- Заданы базовые соглашения по структуре компонентов и именованию слоёв для сборки/редактора
- Настроены alias, runtime config, окружения и тестовые скрипты
- Актуализирован ADR-0001: включены маршруты `/builder`, `/templates`, `/settings` и перенаправление на текущий проект
- Обновлён `docs/plan.md` и `docs/tasks/02-architecture.md` описанием внедрённой навигации

- Определить структуру файловой системы (`pages`, `components`, `composables`, `stores`, `modules`)
- Задать систему лэйаутов, конвенции роутинга и динамические маршруты для конструктора/редактора
- Настроить автоимпорты, runtime config, переменные окружения и алиасы
- Задокументировать ключевые архитектурные решения (ADR)

Статус: завершено → см. `docs/tasks/02-architecture.md` (layout, builder, ADR-0001/0002, runtime config обновлены).

## 3. Фронтенд-стили и UI (SCSS + BEM)

- Наладить многоуровневую структуру SCSS и базовые файлы
- Подготовить токены, утилиты и конвенции BEM
- Собрать стартовую библиотеку UI-компонентов и Storybook

Статус: в работе → см. `docs/tasks/03-frontend-styles.md` (структура стилей, токены, Storybook).

## 4. Основной опыт конструктора

- Спроектировать движок drag‑and‑drop (grid, секции, блоки, виджеты)
- Реализовать библиотеку компонентов для контента (hero, галерея, форма, футер и т. п.)
- Обеспечить инлайн‑редактирование текста, менеджмент медиа для изображений/иконок
- Поддержать редактирование под брейкпоинты (превью desktop/tablet/mobile)
- Добавить стек undo/redo и автосохранение черновика

## 5. Состояние и персистентность

- Определить Pinia‑хранилища: метаданные проекта, структура страниц, ассеты, настройки
- Создать сериализацию/десериализацию состояния конструктора (JSON‑схема)
- Интегрировать слой персистентности (фолбэк LocalStorage, синхронизация с API)
- Внедрить версионирование и публикацию (draft → staging → live)

## 6. Бэкенд/интеграция API

- Определить контракты API (CRUD проектов, ассетов, шаблонов, аутентификация)
- Реализовать серверные маршруты Nuxt или клиент внешнего API
- Обработать аутентификацию, авторизацию и ролевую модель
- Добавить загрузку файлов (подписи URL или интеграция со стореджем)
- Интегрировать вебхуки или событийную систему (уведомления о публикации)

## 7. Шаблоны и публикация сайтов

- Разработать галерею шаблонов с превью и метаданными
- Реализовать импорт/экспорт шаблонов (клонирование проекта)
- Генерировать статический вывод сайта (Nuxt generate или edge‑рендеринг)
- Предоставить варианты деплоя (статический хостинг, serverless‑функции)
- Собрать проверки качества перед публикацией (линк‑чекер, доступность, производительность)

## 8. Обеспечение качества

- Настроить юнит‑тесты (Vitest) и компонентные тесты (Vue Test Utils)
- Добавить E2E‑тесты (Playwright) для ключевых сценариев конструктора
- Настроить визуальные регресс‑тесты (Chromatic или снимки Playwright)
- Интегрировать CI‑пайплайн для линтинга, тестов и сборки
- Отслеживать бюджет производительности и мониторить с Lighthouse CI

## 9. Документация и DX

- Поддерживать README с инструкциями по установке и архитектурным обзором
- Создать гайд по онбордингу разработчиков и правила контрибуции
- Документировать API и схему состояния в `/docs`
- Подготовить пользовательскую помощь (квик‑старт, обзор возможностей)
- Спланировать дорожную карту и трекинг задач (issues/kanban)

## 10. Релиз и поддержка

- Определить стратегию релизов (семантическое версионирование, автогенерация changelog)
- Настроить мониторинг/аналитику использования конструктора
- Включить логирование ошибок и алерты (Sentry или аналог)
- Наладить сбор обратной связи и итерации UX
- Запланировать регулярные обновления зависимостей и аудит безопасности

—
Подробные подзадачи по разделу 1: [docs/tasks/01-setup.md](./tasks/01-setup.md)
Подробные подзадачи по разделу 2: [docs/tasks/02-architecture.md](./tasks/02-architecture.md)
Подробные подзадачи по разделу 3: [docs/tasks/03-frontend-styles.md](./tasks/03-frontend-styles.md)
